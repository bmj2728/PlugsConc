# plugin manifest
plugin:
  name: dog-grpc
  type: animal-grpc
  format: grpc
  entrypoint: dog
  language: go
  version: 1.0.0
about:
  description: This plugin is provides a dog implementation of the animal interface
  maintainer: Brian Jipson
  url: https://github.com/bmj2728/dog-plugin
handshake:
  protocol_version: 1
  magic_cookie_key: DOG_PLUGIN
  magic_cookie_value: 2ggRd5S9bhHottawB6eXwghiOAhekGORmOfIczh5b1D3AYlmrRWIXdbqwDHDJmjq
security:
  auto_mtls: true
capabilities:
  filesystem:
    # Grant access to specific dir
    - path: "/home/user/data/"
      permissions: [read, write, list, create, delete]
      recursive: true # Explicitly grant for subdirectories
    # Grant access to a specific file
    - path: "/etc/config.json"
      permissions: [read]
      recursive: false # Default, will be ignored for files
  network:
    egress: # Outbound connections
      - protocol: "tcp"
        hosts: [ "api.example.com", "192.168.1.100" ]
        ports: [ 443, 8080 ]
    ingress: # Inbound connections
      - protocol: "tcp"
        ports: [ 9000 ]
        allowed_origins: [ "192.168.1.100", "192.168.1.101" ]
  process:
    # Allow executing only specific, whitelisted commands
    exec: # This is a list to allow multiple commands
      - command: "/usr/bin/rsync"
        args: [ "-a", "--delete", "*" ]
      - command: "/usr/bin/git"
        args: [ "pull" ]
    kill: [ children ]
    list: [ children ]
    signal: [ children ]